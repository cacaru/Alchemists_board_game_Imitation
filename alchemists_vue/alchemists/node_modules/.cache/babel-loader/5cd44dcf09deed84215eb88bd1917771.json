{"ast":null,"code":"'use strict';\n\nmodule.exports = stream => {\n  if (stream.listenerCount('error') !== 0) {\n    return stream;\n  }\n\n  stream.__destroy = stream._destroy;\n\n  stream._destroy = (...args) => {\n    const callback = args.pop();\n\n    stream.__destroy(...args, async error => {\n      await Promise.resolve();\n      callback(error);\n    });\n  };\n\n  const onError = error => {\n    // eslint-disable-next-line promise/prefer-await-to-then\n    Promise.resolve().then(() => {\n      stream.emit('error', error);\n    });\n  };\n\n  stream.once('error', onError); // eslint-disable-next-line promise/prefer-await-to-then\n\n  Promise.resolve().then(() => {\n    stream.off('error', onError);\n  });\n  return stream;\n};","map":{"version":3,"names":["module","exports","stream","listenerCount","__destroy","_destroy","args","callback","pop","error","Promise","resolve","onError","then","emit","once","off"],"sources":["E:/web/alchemists_vue/alchemists/node_modules/http2-wrapper/source/utils/delay-async-destroy.js"],"sourcesContent":["'use strict';\n\nmodule.exports = stream => {\n\tif (stream.listenerCount('error') !== 0) {\n\t\treturn stream;\n\t}\n\n\tstream.__destroy = stream._destroy;\n\tstream._destroy = (...args) => {\n\t\tconst callback = args.pop();\n\n\t\tstream.__destroy(...args, async error => {\n\t\t\tawait Promise.resolve();\n\t\t\tcallback(error);\n\t\t});\n\t};\n\n\tconst onError = error => {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\tPromise.resolve().then(() => {\n\t\t\tstream.emit('error', error);\n\t\t});\n\t};\n\n\tstream.once('error', onError);\n\n\t// eslint-disable-next-line promise/prefer-await-to-then\n\tPromise.resolve().then(() => {\n\t\tstream.off('error', onError);\n\t});\n\n\treturn stream;\n};\n"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiBC,MAAM,IAAI;EAC1B,IAAIA,MAAM,CAACC,aAAP,CAAqB,OAArB,MAAkC,CAAtC,EAAyC;IACxC,OAAOD,MAAP;EACA;;EAEDA,MAAM,CAACE,SAAP,GAAmBF,MAAM,CAACG,QAA1B;;EACAH,MAAM,CAACG,QAAP,GAAkB,CAAC,GAAGC,IAAJ,KAAa;IAC9B,MAAMC,QAAQ,GAAGD,IAAI,CAACE,GAAL,EAAjB;;IAEAN,MAAM,CAACE,SAAP,CAAiB,GAAGE,IAApB,EAA0B,MAAMG,KAAN,IAAe;MACxC,MAAMC,OAAO,CAACC,OAAR,EAAN;MACAJ,QAAQ,CAACE,KAAD,CAAR;IACA,CAHD;EAIA,CAPD;;EASA,MAAMG,OAAO,GAAGH,KAAK,IAAI;IACxB;IACAC,OAAO,CAACC,OAAR,GAAkBE,IAAlB,CAAuB,MAAM;MAC5BX,MAAM,CAACY,IAAP,CAAY,OAAZ,EAAqBL,KAArB;IACA,CAFD;EAGA,CALD;;EAOAP,MAAM,CAACa,IAAP,CAAY,OAAZ,EAAqBH,OAArB,EAtB0B,CAwB1B;;EACAF,OAAO,CAACC,OAAR,GAAkBE,IAAlB,CAAuB,MAAM;IAC5BX,MAAM,CAACc,GAAP,CAAW,OAAX,EAAoBJ,OAApB;EACA,CAFD;EAIA,OAAOV,MAAP;AACA,CA9BD"},"metadata":{},"sourceType":"script"}