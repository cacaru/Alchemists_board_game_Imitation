{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { default as Create_lobby } from '@/components/create_lobby.vue'; // 다른 곳에서도 쓸 수 있게 전역 선언\n\nvar socket;\nexport default {\n  name: 'room_list',\n  components: {\n    Create_lobby: Create_lobby\n  },\n\n  created() {},\n\n  mounted() {\n    if (this.$route.params.re_page == \"false\" || this.$route.query.re_page == \"false\") {\n      //console.log(\"start\");\n      //console.log(this.$route.params.ip);\n      socket = io('http://' + this.$route.params.ip + \":3000\"); //console.log(this.$route.params);\n    } else if (this.$route.params.re_page == \"true\") {//console.log(this.$route.params);\n    }\n\n    this.enter_server();\n    socket.on(\"enter_room_success\", data => {\n      //console.log(data);\n      this.room_list = data;\n    });\n    socket.on(\"wrong_pw\", () => {\n      alert(\"비밀번호가 틀렸습니다. \\n다시 시도해주세요\");\n    });\n    socket.on(\"ok_pw\", () => {\n      let count;\n\n      for (let i = 0; i < this.room_list.length; i++) {\n        if (this.room_list[i].name == room_name) {\n          count = this.room_list[i].max_count;\n          break;\n        }\n      }\n\n      this.$router.push({\n        name: 'game_lobby',\n        params: {\n          room_name: this.want_room,\n          room_pw: this.room_pw,\n          count: count,\n          name: this.name,\n          is_master: false,\n          restart_counter: this.restart_counter\n        }\n      });\n    });\n  },\n\n  data() {\n    return {\n      name: this.$route.params.name,\n      room_list: '',\n      room_pw: '',\n      want_room: '',\n      listing: true,\n      loading: true,\n      check_pw_modal: false,\n      restart_counter: this.$route.params.restart_counter\n    };\n  },\n\n  methods: {\n    enter_server: async function () {\n      setTimeout(() => {\n        if (socket.id == undefined || socket.id == '') {\n          // 접속 실패로 이전화면으로 돌림\n          alert(\"접속에 실패하였습니다.\\n 주소를 다시 확인해주세요\");\n          this.$router.push({\n            name: 'first_page',\n            params: {\n              refresh: true\n            }\n          });\n        }\n\n        this.loading = false;\n        socket.emit(\"enter_room_gate\", this.name);\n      }, 3000);\n    },\n    create_room: function () {\n      this.listing = false;\n    },\n    back_page: function () {\n      this.listing = true;\n    },\n    pw_modal_on: function (room_name) {\n      // console.log(room_name);\n      // console.log(this.room_pw);\n      this.want_room = room_name; // 방이 가득찼는지 room_list의 count와 max_count를 검사\n\n      let left_sit = 0;\n\n      for (let i = 0; i < this.room_list.length; i++) {\n        if (this.room_list[i].name == room_name) {\n          left_sit = this.room_list[i].max_count - this.room_list[i].count;\n          break;\n        }\n      } //console.log(left_sit);\n\n\n      if (left_sit > 0) {\n        // pw입력창 띄우기\n        this.check_pw_modal = !this.check_pw_modal;\n      } else {\n        alert(\"해당 방은 인원이 가득 찼습니다!.\\n다른 방을 찾아주세요.\");\n      }\n    },\n    enter_room: function () {\n      // console.log(this.room_pw);\n      // console.log(this.want_room);\n      let send_data = {\n        room_pw: this.room_pw,\n        room_name: this.want_room\n      }; //console.log(send_data);\n\n      this.check_pw_modal = !this.check_pw_modal;\n      socket.emit(\"check_pw\", send_data);\n    }\n  }\n};\nexport { socket };","map":{"version":3,"names":["io","default","Create_lobby","socket","name","components","created","mounted","$route","params","re_page","query","ip","enter_server","on","data","room_list","alert","count","i","length","room_name","max_count","$router","push","want_room","room_pw","is_master","restart_counter","listing","loading","check_pw_modal","methods","setTimeout","id","undefined","refresh","emit","create_room","back_page","pw_modal_on","left_sit","enter_room","send_data"],"sources":["E:/GitHub/personal_tranning/alchemists_vue/alchemists/src/assets/script/room_list.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\nimport { default as Create_lobby } from '@/components/create_lobby.vue';\r\n\r\n// 다른 곳에서도 쓸 수 있게 전역 선언\r\nvar socket;\r\n\r\nexport default {\r\n    name : 'room_list',\r\n    components : {\r\n        Create_lobby : Create_lobby,\r\n    },\r\n    created() {\r\n        \r\n    },\r\n    mounted() {\r\n        if( this.$route.params.re_page == \"false\" || this.$route.query.re_page == \"false\"){\r\n            //console.log(\"start\");\r\n            //console.log(this.$route.params.ip);\r\n            socket = io('http://' + this.$route.params.ip + \":3000\");\r\n            //console.log(this.$route.params);\r\n        }\r\n        else if ( this.$route.params.re_page == \"true\"){\r\n            //console.log(this.$route.params);\r\n        }\r\n\r\n        this.enter_server();\r\n\r\n        socket.on(\"enter_room_success\", (data)=> {\r\n            //console.log(data);\r\n            this.room_list = data;\r\n        });\r\n\r\n        socket.on(\"wrong_pw\", () => {\r\n            alert(\"비밀번호가 틀렸습니다. \\n다시 시도해주세요\");\r\n        });\r\n\r\n        socket.on(\"ok_pw\", () => {\r\n            let count;\r\n            for(let i = 0 ; i < this.room_list.length; i++ ){\r\n                if( this.room_list[i].name == room_name ){\r\n                    count = this.room_list[i].max_count;\r\n                    break;\r\n                }\r\n            }\r\n            this.$router.push({\r\n                name: 'game_lobby',\r\n                params: {\r\n                    room_name: this.want_room,\r\n                    room_pw: this.room_pw,\r\n                    count : count,\r\n                    name: this.name,\r\n                    is_master : false,\r\n                    restart_counter : this.restart_counter,\r\n                }\r\n            });\r\n        });\r\n    },\r\n    data () {\r\n        return {\r\n            name : this.$route.params.name,\r\n            room_list : '',\r\n            room_pw : '',\r\n            want_room : '',\r\n            listing : true,\r\n            loading : true,\r\n            check_pw_modal : false,\r\n            restart_counter : this.$route.params.restart_counter,\r\n        }\r\n    },\r\n    methods : {\r\n        enter_server : async function() {\r\n            setTimeout(()=>{\r\n                if( socket.id == undefined || socket.id == '' ){\r\n                    // 접속 실패로 이전화면으로 돌림\r\n                    alert(\"접속에 실패하였습니다.\\n 주소를 다시 확인해주세요\");\r\n                    this.$router.push({\r\n                        name: 'first_page',\r\n                        params : {\r\n                            refresh : true,\r\n                        }\r\n                    });\r\n                }\r\n                this.loading = false;\r\n                socket.emit(\"enter_room_gate\", this.name);\r\n            }, 3000);\r\n            \r\n        },\r\n\r\n        create_room : function() {\r\n            this.listing = false;\r\n        },\r\n        back_page : function() {\r\n            this.listing = true;\r\n        },\r\n\r\n        pw_modal_on : function(room_name) {\r\n            // console.log(room_name);\r\n            // console.log(this.room_pw);\r\n            this.want_room = room_name;\r\n            // 방이 가득찼는지 room_list의 count와 max_count를 검사\r\n            let left_sit = 0;\r\n            for(let i = 0 ; i < this.room_list.length; i++ ){\r\n                if( this.room_list[i].name == room_name ){\r\n                    left_sit = this.room_list[i].max_count - this.room_list[i].count;\r\n                    break;\r\n                }\r\n            }\r\n            //console.log(left_sit);\r\n            if( left_sit > 0 ){\r\n                // pw입력창 띄우기\r\n                this.check_pw_modal = !this.check_pw_modal;\r\n            }\r\n            else {\r\n                alert(\"해당 방은 인원이 가득 찼습니다!.\\n다른 방을 찾아주세요.\");\r\n            }\r\n        },\r\n\r\n        enter_room : function() {\r\n            // console.log(this.room_pw);\r\n            // console.log(this.want_room);\r\n            let send_data = {\r\n                room_pw : this.room_pw,\r\n                room_name : this.want_room,\r\n            };\r\n            //console.log(send_data);\r\n            this.check_pw_modal = !this.check_pw_modal;\r\n            socket.emit(\"check_pw\", send_data);\r\n        }\r\n    },\r\n}\r\n\r\nexport { socket };"],"mappings":"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"},"metadata":{},"sourceType":"module"}