{"ast":null,"code":"import { socket } from '@/components/room_list.vue';\nexport default {\n  name: 'end_page',\n\n  created() {\n    this.my_key = socket.id;\n  },\n\n  mounted() {\n    // 다시하기 확인\n    socket.on(\"restart_check\", data => {\n      this.restart_member_count = data;\n    }); // 다시하기 취소!\n\n    socket.on(\"restart_cancel_check\", data => {\n      this.restart_member_count = data;\n      this.cancel_restart_val = false;\n    });\n    socket.on(\"cant_restart\", () => {\n      this.$router.push({\n        name: 'room_list',\n        params: {\n          re_page: true,\n          name: this.my_name,\n          restart_counter: this.restart_counter\n        }\n      });\n    });\n    socket.on(\"restart\", data => {\n      this.room_pw = data.room_pw;\n      this.count = data.count;\n      let is_master = false;\n\n      if (data.master_key == this.my_key) {\n        is_master = true;\n      }\n\n      socket.emit(\"restart_move\");\n      this.$router.push({\n        name: 'game_lobby',\n        params: {\n          nick_name: this.my_name,\n          room_pw: this.room_pw,\n          count: this.count,\n          is_master: is_master,\n          is_restart: true,\n          restart_counter: this.restart_counter // ip port 정보도 보내주는게 원칙인데 서버에 방 형식으로 구현방식을 변경해서 진행해야할듯 일단 ㄱ\n\n        }\n      });\n    });\n  },\n\n  data() {\n    return {\n      game_result: JSON.parse(this.$route.params.game_result),\n      my_key: '',\n      restart_member_count: 0,\n      cancel_restart_val: false,\n      my_name: this.$route.params.name,\n      room_pw: '',\n      count: '',\n      room_name: this.$route.params.room_name,\n      restart_counter: this.$route.params.restart_counter\n    };\n  },\n\n  methods: {\n    want_restart: function () {\n      // 다시 하고 싶다는 의사 전달 \n      // 추후에 인원이 다 안차더라도 게임 로비로 이동됨\n      // 로비로 이동될 떄 게임방 주인은 순위 가장 높은 사람으로 선정\n      let send_data = {\n        user_key: this.my_key,\n        room_name: this.room_name\n      };\n      this.cancel_restart_val = true;\n      socket.emit(\"restart_checking\", send_data);\n    },\n    close_game: function () {\n      // 서버에서 나가지고 room_list로 이동됨\n      let send_data = {\n        room_name: this.room_name,\n        user_key: this.my_key\n      };\n      socket.emit(\"out_game\", send_data); // 모든 컴포넌트 새로그리기?\n\n      this.$router.push({\n        name: 'room_list',\n        params: {\n          re_page: true,\n          name: this.$route.params.name,\n          restart_counter: this.$route.params.restart_counter\n        }\n      });\n    },\n    cancel_restart: function () {\n      let send_data = {\n        user_key: this.my_key,\n        room_name: this.room_name\n      };\n      socket.emit(\"restart_cancel\", send_data);\n    }\n  }\n};","map":{"version":3,"names":["socket","name","created","my_key","id","mounted","on","data","restart_member_count","cancel_restart_val","$router","push","params","re_page","my_name","restart_counter","room_pw","count","is_master","master_key","emit","nick_name","is_restart","game_result","JSON","parse","$route","room_name","methods","want_restart","send_data","user_key","close_game","cancel_restart"],"sources":["E:/GitHub/personal_tranning/alchemists_vue/alchemists/src/assets/script/end_page.js"],"sourcesContent":["import { socket } from '@/components/room_list.vue'\r\n\r\nexport default {\r\n    name : 'end_page',\r\n    created() {\r\n        this.my_key = socket.id;\r\n    },\r\n    mounted () {\r\n        // 다시하기 확인\r\n        socket.on(\"restart_check\", (data) => {\r\n            this.restart_member_count = data;\r\n        });\r\n        // 다시하기 취소!\r\n        socket.on(\"restart_cancel_check\", (data) => {\r\n            this.restart_member_count = data;\r\n            this.cancel_restart_val = false;\r\n        });\r\n\r\n        socket.on(\"cant_restart\", () => {\r\n            this.$router.push({\r\n                name : 'room_list',\r\n                params : {\r\n                    re_page : true,\r\n                    name : this.my_name,\r\n                    restart_counter : this.restart_counter,\r\n                }\r\n            });\r\n        });\r\n\r\n        socket.on(\"restart\", (data) => {\r\n            this.room_pw = data.room_pw;\r\n            this.count = data.count;\r\n            let is_master = false;\r\n            if( data.master_key == this.my_key ){\r\n                is_master = true;\r\n            }\r\n            socket.emit(\"restart_move\");\r\n            this.$router.push({\r\n                name: 'game_lobby',\r\n                params : {\r\n                    nick_name : this.my_name,\r\n                    room_pw   : this.room_pw,\r\n                    count     : this.count,\r\n                    is_master : is_master,\r\n                    is_restart : true,\r\n                    restart_counter : this.restart_counter,\r\n                    // ip port 정보도 보내주는게 원칙인데 서버에 방 형식으로 구현방식을 변경해서 진행해야할듯 일단 ㄱ\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n    data () {\r\n        return {\r\n            game_result : JSON.parse(this.$route.params.game_result),\r\n            my_key : '',\r\n            restart_member_count : 0,\r\n            cancel_restart_val : false,\r\n            my_name : this.$route.params.name,\r\n            room_pw : '',\r\n            count : '',\r\n            room_name : this.$route.params.room_name,\r\n            restart_counter : this.$route.params.restart_counter,\r\n        }\r\n    },\r\n    methods : {\r\n        want_restart : function() {\r\n            // 다시 하고 싶다는 의사 전달 \r\n            // 추후에 인원이 다 안차더라도 게임 로비로 이동됨\r\n            // 로비로 이동될 떄 게임방 주인은 순위 가장 높은 사람으로 선정\r\n            let send_data = {\r\n                user_key : this.my_key,\r\n                room_name : this.room_name,\r\n            };\r\n            this.cancel_restart_val = true;\r\n            socket.emit(\"restart_checking\", send_data);\r\n        },\r\n\r\n        close_game : function() {\r\n            // 서버에서 나가지고 room_list로 이동됨\r\n            let send_data = {\r\n                room_name : this.room_name,\r\n                user_key : this.my_key,\r\n            };\r\n            socket.emit(\"out_game\", send_data);\r\n            // 모든 컴포넌트 새로그리기?\r\n            this.$router.push({\r\n                name : 'room_list',\r\n                params : {\r\n                    re_page : true,\r\n                    name : this.$route.params.name,\r\n                    restart_counter : this.$route.params.restart_counter,\r\n                }\r\n            });\r\n        },\r\n\r\n        cancel_restart : function() {\r\n            let send_data = {\r\n                user_key : this.my_key,\r\n                room_name : this.room_name,\r\n            };\r\n            socket.emit(\"restart_cancel\", send_data);\r\n        },\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}