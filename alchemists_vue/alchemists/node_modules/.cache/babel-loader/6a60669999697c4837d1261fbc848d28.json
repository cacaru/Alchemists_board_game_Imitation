{"ast":null,"code":"import { socket } from '@/components/room_list.vue';\nexport default {\n  name: 'end_page',\n\n  created() {\n    this.my_key = socket.id;\n  },\n\n  mounted() {\n    // 다시하기 확인\n    socket.on(\"restart_check\", data => {\n      this.restart_member_count = data;\n    }); // 다시하기 취소!\n\n    socket.on(\"restart_cancel_check\", data => {\n      this.restart_member_count = data;\n      this.cancel_restart_val = false;\n    });\n    socket.on(\"cant_restart\", () => {\n      let send_data = {\n        room_name: this.room_name\n      };\n      socket.emit(\"lobby_move\", send_data);\n      this.$router.push({\n        name: 'room_list',\n        params: {\n          re_page: true,\n          name: this.my_name,\n          restart_counter: this.restart_counter\n        }\n      });\n    });\n    socket.on(\"restart\", data => {\n      this.room_pw = data.room_pw;\n      this.count = data.count;\n      let is_master = false;\n\n      if (data.master_key == this.my_key) {\n        is_master = true;\n      }\n\n      let send_data = {\n        room_name: this.room_name\n      };\n      socket.emit(\"lobby_move\", send_data);\n      this.$router.push({\n        name: 'game_lobby',\n        params: {\n          name: this.my_name,\n          room_name: this.room_name,\n          room_pw: this.room_pw,\n          count: this.count,\n          is_master: is_master,\n          is_restart: true,\n          restart_counter: this.restart_counter // ip port 정보도 보내주는게 원칙인데 서버에 방 형식으로 구현방식을 변경해서 진행해야할듯 일단 ㄱ\n\n        }\n      });\n    });\n  },\n\n  data() {\n    return {\n      game_result: JSON.parse(this.$route.params.game_result),\n      my_key: '',\n      restart_member_count: 0,\n      cancel_restart_val: false,\n      my_name: this.$route.params.name,\n      room_pw: '',\n      count: '',\n      room_name: this.$route.params.room_name,\n      restart_counter: this.$route.params.restart_counter\n    };\n  },\n\n  methods: {\n    want_restart: function () {\n      // 다시 하고 싶다는 의사 전달 \n      // 추후에 인원이 다 안차더라도 게임 로비로 이동됨\n      // 로비로 이동될 떄 게임방 주인은 순위 가장 높은 사람으로 선정\n      let send_data = {\n        user_key: this.my_key,\n        room_name: this.room_name\n      };\n      this.cancel_restart_val = true;\n      socket.emit(\"restart_checking\", send_data);\n    },\n    close_game: function () {\n      // 서버에서 나가지고 room_list로 이동됨\n      let send_data = {\n        room_name: this.room_name,\n        user_key: this.my_key\n      };\n      socket.emit(\"out_game\", send_data); // 모든 컴포넌트 새로그리기?\n\n      this.$router.push({\n        name: 'room_list',\n        params: {\n          re_page: true,\n          name: this.$route.params.name,\n          restart_counter: this.$route.params.restart_counter\n        }\n      });\n    },\n    cancel_restart: function () {\n      let send_data = {\n        user_key: this.my_key,\n        room_name: this.room_name\n      };\n      socket.emit(\"restart_cancel\", send_data);\n    }\n  }\n};","map":{"version":3,"names":["socket","name","created","my_key","id","mounted","on","data","restart_member_count","cancel_restart_val","send_data","room_name","emit","$router","push","params","re_page","my_name","restart_counter","room_pw","count","is_master","master_key","is_restart","game_result","JSON","parse","$route","methods","want_restart","user_key","close_game","cancel_restart"],"sources":["E:/GitHub/personal_tranning/alchemists_vue/alchemists/src/assets/script/end_page.js"],"sourcesContent":["import { socket } from '@/components/room_list.vue'\r\n\r\nexport default {\r\n    name : 'end_page',\r\n    created() {\r\n        this.my_key = socket.id;\r\n    },\r\n    mounted () {\r\n        // 다시하기 확인\r\n        socket.on(\"restart_check\", (data) => {\r\n            this.restart_member_count = data;\r\n        });\r\n        // 다시하기 취소!\r\n        socket.on(\"restart_cancel_check\", (data) => {\r\n            this.restart_member_count = data;\r\n            this.cancel_restart_val = false;\r\n        });\r\n\r\n        socket.on(\"cant_restart\", () => {\r\n            let send_data = {\r\n                room_name : this.room_name,\r\n            };\r\n            socket.emit(\"lobby_move\", send_data);\r\n            this.$router.push({\r\n                name : 'room_list',\r\n                params : {\r\n                    re_page : true,\r\n                    name : this.my_name,\r\n                    restart_counter : this.restart_counter,\r\n                }\r\n            });\r\n        });\r\n\r\n        socket.on(\"restart\", (data) => {\r\n            this.room_pw = data.room_pw;\r\n            this.count = data.count;\r\n            let is_master = false;\r\n            if( data.master_key == this.my_key ){\r\n                is_master = true;\r\n            }\r\n            let send_data = {\r\n                room_name : this.room_name,\r\n            };\r\n            socket.emit(\"lobby_move\", send_data);\r\n            this.$router.push({\r\n                name: 'game_lobby',\r\n                params : {\r\n                    name      : this.my_name,\r\n                    room_name : this.room_name,\r\n                    room_pw   : this.room_pw,\r\n                    count     : this.count,\r\n                    is_master : is_master,\r\n                    is_restart : true,\r\n                    restart_counter : this.restart_counter,\r\n                    // ip port 정보도 보내주는게 원칙인데 서버에 방 형식으로 구현방식을 변경해서 진행해야할듯 일단 ㄱ\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n    data () {\r\n        return {\r\n            game_result : JSON.parse(this.$route.params.game_result),\r\n            my_key : '',\r\n            restart_member_count : 0,\r\n            cancel_restart_val : false,\r\n            my_name : this.$route.params.name,\r\n            room_pw : '',\r\n            count : '',\r\n            room_name : this.$route.params.room_name,\r\n            restart_counter : this.$route.params.restart_counter,\r\n        }\r\n    },\r\n    methods : {\r\n        want_restart : function() {\r\n            // 다시 하고 싶다는 의사 전달 \r\n            // 추후에 인원이 다 안차더라도 게임 로비로 이동됨\r\n            // 로비로 이동될 떄 게임방 주인은 순위 가장 높은 사람으로 선정\r\n            let send_data = {\r\n                user_key : this.my_key,\r\n                room_name : this.room_name,\r\n            };\r\n            this.cancel_restart_val = true;\r\n            socket.emit(\"restart_checking\", send_data);\r\n        },\r\n\r\n        close_game : function() {\r\n            // 서버에서 나가지고 room_list로 이동됨\r\n            let send_data = {\r\n                room_name : this.room_name,\r\n                user_key : this.my_key,\r\n            };\r\n            socket.emit(\"out_game\", send_data);\r\n            // 모든 컴포넌트 새로그리기?\r\n            this.$router.push({\r\n                name : 'room_list',\r\n                params : {\r\n                    re_page : true,\r\n                    name : this.$route.params.name,\r\n                    restart_counter : this.$route.params.restart_counter,\r\n                }\r\n            });\r\n        },\r\n\r\n        cancel_restart : function() {\r\n            let send_data = {\r\n                user_key : this.my_key,\r\n                room_name : this.room_name,\r\n            };\r\n            socket.emit(\"restart_cancel\", send_data);\r\n        },\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}